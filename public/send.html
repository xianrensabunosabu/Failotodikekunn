<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é€ä¿¡ - ãƒ•ã‚¡ã‚¤ãƒ«ãŠå±Šã‘ä¾¿</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>ğŸ“¤ ãƒ•ã‚¡ã‚¤ãƒ«é€ä¿¡</h1>
  <form id="uploadForm">
    <input type="file" name="file" required>
    <button type="submit">ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</button>
  </form>

  <div id="result"></div>

  <script>
    const form = document.getElementById('uploadForm');
    const result = document.getElementById('result');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const data = new FormData(form);
      result.innerHTML = "ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­ã§ã™...";

      const res = await fetch('/upload', { method: 'POST', body: data });
      const json = await res.json();

      result.innerHTML = `
        <p>ã“ã®URLã‚’ç›¸æ‰‹ã«é€ã£ã¦ãã ã•ã„ğŸ‘‡</p>
        <a href="${json.downloadUrl}" target="_blank">${json.downloadUrl}</a>
        <p>QRã‚³ãƒ¼ãƒ‰ã§å—ä¿¡ã™ã‚‹å ´åˆ:</p>
        <img src="${json.qr}" alt="QRã‚³ãƒ¼ãƒ‰" style="width:200px;">
      `;
    });
  </script>
</body>
</html>
